<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nai-Nai Neon</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <div id="pantalla-referidos" class="modal-full neon-border" style="display:none; z-index:3000;">
        <div class="box-intro">
            <h1 class="neon-text">ğŸ’ Futuro Nai-Nai</h1>
            <p>Gana compartiendo. Â¿QuiÃ©n te invitÃ³?</p>
            <input type="text" id="ref-input" placeholder="Ej: usuario.Nai">
            <button onclick="guardarReferido()" class="btn-neon">Entrar</button>
        </div>
    </div>

    <div id="auth-container" class="modal-full" style="display:none; z-index:2000;">
        <div class="box-intro neon-box">
            <img src="https://i.ibb.co/hF6VHB5F/1ec8541e-1.png" class="logo-neon">
            <h2 class="neon-text">NAI-NAI</h2>
            <button onclick="loginGoogle()" class="btn-google">Google</button>
            <button onclick="entrarInvitado()" class="btn-invitado neon-border">Invitado</button>
        </div>
    </div>

    <div id="app-interface" style="display:none;">
        <div id="feed-vertical" class="feed-container">
            </div>

        <div class="nav-bar neon-top-border">
            <button onclick="recargarFeed()">ğŸ </button>
            <button onclick="abrirEditor()" class="btn-plus-neon">â•</button>
            <button onclick="abrirPerfil()">ğŸ‘¤</button>
        </div>
    </div>

    <div id="modal-editor" class="modal-overlay" style="display:none;">
        <div class="modal-content neon-box">
            <h3 class="neon-text">ğŸ¬ Crear Video</h3>
            <div class="preview-box neon-border-thin">
                <video id="preview-v" loop playsinline></video>
            </div>
            
            <div class="editor-tools">
                <button onclick="setFilter('none')">Normal</button>
                <button onclick="setFilter('grayscale(1)')">B/N</button>
                <button onclick="setFilter('sepia(1)')">Retro</button>
                <button onclick="setFilter('hue-rotate(90deg)')">Alien</button>
                <button onclick="setFilter('contrast(1.5) saturate(1.5)')">Intenso</button>
            </div>

            <input type="text" id="v-titulo" placeholder="TÃ­tulo...">
            <input type="text" id="v-tags" placeholder="Etiquetas (Ej: Humor, Juegos, Vlogs)">
            
            <div class="switch-row">
                <label>Marca de Agua .Nai</label>
                <input type="checkbox" id="v-watermark" checked>
            </div>

            <input type="file" id="file-input" accept="video/*" onchange="cargarVideoFile(event)" style="margin-top:10px;">
            
            <div class="modal-botones">
                 <button onclick="cerrarModal('modal-editor')" class="btn-danger">Cancelar</button>
                <button onclick="subirVideo()" class="btn-neon">PUBLICAR</button>
            </div>
        </div>
    </div>

    <div id="modal-perfil" class="modal-overlay" style="display:none;">
        <div class="modal-content neon-box profile-modal">
            <div class="perfil-top">
                <div style="position: relative;">
                    <img id="p-avatar" src="" class="avatar-grande neon-border">
                    <label for="avatar-upload" class="btn-upload-avatar">ğŸ“·</label>
                    <input type="file" id="avatar-upload" accept="image/*" style="display:none;" onchange="subirAvatarPropio(event)">
                </div>
                
                <div class="perfil-datos">
                    <input type="text" id="p-alias-input" class="input-alias-edit" value="Usuario">
                    
                    <div id="p-cuenta-nai" class="badge-nai-neon"></div>
                    <small class="neon-text-sub">ğŸ›¡ï¸ GUA: <span id="p-gua">0</span></small>
                </div>
            </div>
            
            <button onclick="guardarAlias()" class="btn-mini-save">ğŸ’¾ Guardar Nombre</button>

            <hr class="neon-divider">

            <button onclick="gestionarCuentaNai()" class="btn-neon-purple">âœ¨ Cuenta .Nai (Seguridad)</button>
            <button onclick="abrirOpcionesAvanzadas()" class="btn-dark-opt">âš™ï¸ Privacidad Fantasma</button>
            
            <div class="modal-botones">
                <button onclick="cerrarSesion()" class="btn-danger">Salir</button>
                <button onclick="cerrarModal('modal-perfil')" class="btn-dark-opt">Cerrar</button>
            </div>
        </div>
    </div>

    <div id="modal-opciones" class="modal-overlay" style="display:none;">
        <div class="modal-content neon-box">
            <h3 class="neon-text">ğŸ‘» Modo Fantasma</h3>
            <div class="switch-row">
                <span>Ocultar al ver</span>
                <input type="checkbox" id="check-priv-ver" onchange="cambiarPrivacidad('ver')">
            </div>
            <div class="switch-row">
                <span>AnÃ³nimo al comentar</span>
                <input type="checkbox" id="check-priv-com" onchange="cambiarPrivacidad('comentar')">
            </div>
            <button onclick="cerrarModal('modal-opciones')" class="btn-neon" style="margin-top:15px;">Listo</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
