<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nai-Nai Super App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="pantalla-referidos" class="modal-full" style="display:none;">
        <div class="box-comun">
            <h2>ğŸ’° Futuro Nai-Nai</h2>
            <p>En un futuro, la manera de ganar dinero real serÃ¡ compartiendo la app.</p>
            <hr>
            <p>Â¿QuiÃ©n te invitÃ³? (Nombre, .Nai o Google)</p>
            <input type="text" id="ref-input" placeholder="Nombre de tu amigo">
            <button onclick="guardarReferido()" class="btn-principal">Entrar a Nai-Nai</button>
        </div>
    </div>

    <div id="auth-container" class="modal-full">
        <div class="box-comun">
            <img src="https://i.ibb.co/hF6VHB5F/1ec8541e-1.png" class="logo-main">
            <h1>Nai-Nai</h1>
            <button onclick="loginGoogle()" class="btn-google">Entrar con Google</button>
            <button onclick="entrarInvitado()" class="btn-invitado">Modo Invitado</button>
        </div>
    </div>

    <div id="app" style="display:none;">
        <div class="feed-container" id="feed-vertical">
            </div>

        <div class="nav-bar">
            <button onclick="mostrarSeccion('feed')">ğŸ </button>
            <button onclick="abrirEditor()">â•</button>
            <button onclick="mostrarSeccion('perfil')">ğŸ‘¤</button>
        </div>
    </div>

    <div id="modal-perfil" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <div class="perfil-header">
                <img id="p-avatar" class="avatar-m" src="">
                <div class="p-info">
                    <h2 id="p-alias">Usuario</h2>
                    <span id="p-cuenta-nai" class="p-nai"></span>
                    <div class="p-gua">ğŸ›¡ï¸ GUA: <span id="p-gua-val">100</span></div>
                </div>
            </div>
            
            <button onclick="abrirConfig()" class="btn-opc">âš™ï¸ Opciones Avanzadas</button>
            <button onclick="toggleCuentaNai()" id="btn-nai" class="btn-nai-promo">âœ¨ Gestionar Cuenta .Nai</button>
            <button onclick="logout()" class="btn-danger">Cerrar SesiÃ³n</button>
            <button onclick="cerrarModales()" class="btn-close">Cerrar</button>
        </div>
    </div>

    <div id="modal-config" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h3>Opciones Avanzadas</h3>
            <div class="switch-box">
                <label>Modo Fantasma (Al ver)</label>
                <input type="checkbox" id="priv-ver" onchange="cambiarPrivacidad('ver')">
            </div>
            <div class="switch-box">
                <label>Modo Fantasma (Al comentar)</label>
                <input type="checkbox" id="priv-com" onchange="cambiarPrivacidad('comentar')">
            </div>
            <hr>
            <button onclick="abrirEditorContrasena()" class="btn-opc">Editar ContraseÃ±a .Nai</button>
            <button onclick="cerrarModales()" class="btn-close">Volver</button>
        </div>
    </div>

    <div id="modal-editor" class="modal-overlay" style="display:none;">
        <div class="modal-content editor-box">
            <h3>Editor Nai-Nai</h3>
            <video id="preview-v" controls style="width:100%; border-radius:10px;"></video>
            
            <div class="editor-tools">
                <button onclick="aplicarFiltro('grayscale(1)')">B/N</button>
                <button onclick="aplicarFiltro('sepia(1)')">Retro</button>
                <button onclick="aplicarFiltro('hue-rotate(90deg)')">Snap</button>
                <button onclick="aplicarFiltro('none')">Limpiar</button>
            </div>

            <input type="text" id="v-titulo" placeholder="TÃ­tulo">
            <input type="text" id="v-link-ext" placeholder="Link externo (opcional)">
            
            <select id="v-original" onchange="checkOriginal()">
                <option value="true">Es mÃ­o</option>
                <option value="false">No es mÃ­o (Dar crÃ©ditos)</option>
            </select>
            <input type="text" id="v-fuente" placeholder="Link video original" style="display:none;">

            <div class="switch-box">
                <label>Marca de agua .Nai</label>
                <input type="checkbox" id="v-watermark" checked>
            </div>

            <input type="file" id="file-input" accept="video/*" onchange="loadVideo(event)">
            
            <div class="modal-botones">
                <button onclick="cerrarModales()" class="btn-danger">Cancelar</button>
                <button onclick="subirVideo()" class="btn-confirmar">PUBLICAR</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>
